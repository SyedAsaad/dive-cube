<!doctype html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <div th:replace="header :: myheader"></div>
</head>
<body>
<aside id="left-panel" class="left-panel">
    <div th:replace="aside :: myMenu"></div>
</aside>
<div id="right-panel" class="right-panel">
    <header id="header" class="header">
        <div class="header-menu">
            <div class="col-sm-7">
                <a id="menuToggle" class="menutoggle pull-left"><i
                        class="fa fa fa-tasks"></i></a>
            </div>
            <a class="btn-logout pull-right" th:href="@{/logout}">
                <i class="fa fa-sign-out"></i> Logout
            </a>
        </div>
    </header>
    <div class="content mt-3">
        <div class="col-lg-12">
            <div class="card">
<!--                th:action="@{}"-->
                <form id="formSubmit" enctype="multipart/form-data" method="post" th:object="${student}">
                    <input type="hidden" th:field="*{id}"/>
                    <div class="card-header">
                        <small>Add </small>Student
                    </div>
                    <div class="card-body card-block">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label >Name</label> <input
                                    type="text" class="form-control" name="name" id="name"
                                    placeholder="Name" th:field="*{name}">
                            </div>
                            <div class="form-group col-md-6">
                                <label >Phone Number</label> <input
                                    type="text" class="form-control" name="phoneNumber" id="phoneNumber"
                                    placeholder="Phone Number" th:field="*{phoneNumber}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label>Country</label>
                                <input type="text" class="form-control" name="country" id="country"
                                       placeholder="Country Name" th:field="*{country}">
                            </div>
                            <div class="form-group col-md-6">
                                <label >City</label> <input
                                    type="text" class="form-control" name="city" id="city"
                                    placeholder="City Name" th:field="*{city}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-9">
                                <label>Address</label>
                                <input type="text" class="form-control" name="address" placeholder="Address" th:field="*{permanentAddress}">
                            </div>
                            <div class="form-group col-md-3">
                                <label >Zip Code</label> <input
                                    type="text" class="form-control" name="zipCode"
                                    placeholder="Zip Code" th:field="*{zipCode}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label class=" form-control-label">Gender :</label>
                                <select class="form-control" id="gender" name="gender" th:field="*{gender}">
                                    <option value="" selected>Select Gender</option>
                                    <option value="Male" >Male</option>
                                    <option value="Female" >Female</option>
                                </select>

                            </div>

                            <div class="form-group col-md-6">
                                <label class="form-control-label">Date Of Birth : </label>

                                <input type="text"
                                       class="form-control" name="dob" id="dob"
                                       th:field="*{dob}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-9">
                                <label class="form-control-label">Image :</label>
                                <input type="file" id="fileUploadForm" name="file">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label>Emergency Contact Name</label>
                                <input type="text" class="form-control" name="emergencyContactName" placeholder="Contact Name" th:field="*{emergencyContactName}">
                            </div>
                            <div class="form-group col-md-6">
                                <label>Emergency Contact Number</label>
                                <input type="text" class="form-control" name="emergencyContactNum" placeholder="Contact Number" th:field="*{emergencyContactNum}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-12">
                                <label>Certificate Recieving Address (Where do you want your certification recieved)</label>
                                <input type="text" class="form-control" name="recievingAddress" placeholder="Certificate Recieving Address" th:field="*{recievingAddress}">
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button type="submit" class="btn btn-primary btn-sm"
                                id="submit-btn">
                            <i class="fa fa-dot-circle-o"></i> Submit
                        </button>
                        <button type="reset" class="btn btn-danger btn-sm" id="reset">
                            <i class="fa fa-ban"></i> Reset
                        </button>
                    </div>
                </form>
            </div>
        </div>
<!--        <div class="col-lg-12">-->
<!--            <div class="card">-->
<!--                <div class="card-header">-->
<!--                    <strong class="card-title">Employee</strong>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <div class="table-responsive">-->
<!--                        <table id="quote-datatable"-->
<!--                               class="table table-striped table-bordered">-->
<!--                            <thead>-->
<!--                            <tr>-->
<!--                                <th>Name</th>-->
<!--                                <th>Email</th>-->
<!--                                <th>Telephone</th>-->
<!--                                <th>City</th>-->
<!--                                <th>Country</th>-->
<!--                                <th>Address</th>-->
<!--                                <th>Week Salary</th>-->
<!--                                <th>Class of Person</th>-->
<!--                                <th>Start Date</th>-->
<!--                                <th>End Date</th>-->
<!--                                <th>Action</th>-->
<!--                                <th>Action</th>-->
<!--                            </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                            <tr th:each="employee : ${employees}">-->
<!--                                <td th:text="${employee.name}"></td>-->
<!--                                <td th:text="${employee.email}"></td>-->
<!--                                <td th:text="${employee.telephone}"></td>-->
<!--                                <td th:text="${employee.city}"></td>-->
<!--                                <td th:text="${employee.country}"></td>-->
<!--                                <td th:text="${employee.address}"></td>-->
<!--                                <td th:text="${employee.salaryPerWeek}"></td>-->
<!--                                <td th:text="${employee.classOfPerson}"></td>-->
<!--                                <td th:text="${employee.startDate}"></td>-->
<!--                                <td th:text="${employee.endDate}"></td>-->
<!--                                <td><a th:href="@{employee/delete/{id}(id=${employee.id})}" class="btn btn-danger btn-sm">Delete</a></td>-->
<!--                                <td><a th:href="@{employee/edit/{id}(id=${employee.id})}" class="btn btn-danger btn-sm">Edit</a></td>-->
<!--                            </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
    </div>
</div>

<footer>
    <div th:replace="footer :: myfooter"></div>
</footer>
<script>

    $('#dob').datepicker('setDate', 'today');
    $('.input-group.date').datepicker({
        autoclose: true,
        todayHighlight: true
    });

    $('#dob').datepicker({

        format : 'dd/MM/yyyy',
        autoclose : true

    });

    $('#quote-datatable').DataTable({
        "paging" : true,
        "lengthChange" : true,
        "searching" : true,
        "ordering" : true,
        "info" : false,
        "responsive" : true,
        "autoWidth" : false,
        "pageLength" : 10,
        "order" : [ [ 1, 'asc' ] ]
    });



    $( "#formSubmit" ).submit( function ( event ) {


        $("#submit-btn").prop("disabled", true);

        var form = $('#fileUploadForm')[0];

        var data = new FormData(form);

        // data.append("studentDto", "This is some extra data, testing");


        // var studentDto = GenerateJsonArray('formSubmit');
        // $('#vendorData').val(JSON.stringify(vendorData));
        // $( '#rolesData' ).val( JSON.parse( JSON.stringify( checkboxValues.join( "," ) ) ) );
        var formValue = {};
        formValue["name"] = $('#name').val();
        formValue["phoneNumber"] = $('#phoneNumber').val();
        formValue["country"] = $('#country').val();
        formValue["city"] = $('#city').val();
        var formData = new FormData();
        var file = formData.inputFile;
        formData.append("file",$(this)[0])
        formData.append("studentDto",JSON.stringify(formValue));
        //loader( true );
        $.ajax({
            url: "/student/save",
            type: "POST",
            data: formData  ,
            enctype: "multipart/form-data",
            processData: false,
            contentType: false,
            success: function (data) {

                // $("#result").text(data);
                console.log("SUCCESS : ", data);
                $("#submit-btn").prop("disabled", false);

            },
            error: function (e) {

                // $("#result").text(e.responseText);
                console.log("ERROR : ", e);
                $("#submit-btn").prop("disabled", false);

            }
        });
    });


</script>
</body>
</html>

